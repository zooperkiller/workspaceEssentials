<template>
  <section class="modal">
    <div class="modal-container">
      <header class="modal-header">
        <h2>Submit Customer Service Case</h2>
        <button class="close-button" onclick={closeModal} aria-label="Close">Ã—</button>
      </header>
      <div class="modal-content">
        <div class="form-grid">
          <!-- First Row -->
          <lightning-combobox label="Case Relates to:" value={selectedRecordType} options={recordTypeOptions}
            onchange={handleRecordTypeChange}></lightning-combobox>

            <lightning-input type="search" label="Account" value={searchQuery} onchange={handleSearchChange} 
            placeholder="Search Accounts..." ></lightning-input>

          <!-- Dropdown to show Accounts -->
          <lightning-combobox label="Select Account" value={selectedAccountId} options={accountOptions} 
            onchange={handleAccountSelection}></lightning-combobox>
        </div>
        <div class="form-grid2">
          <!-- Second Row -->
          <lightning-combobox label="Case Reason" options={controllingPicklist} onchange={fetchDependentValue}
            disabled={caseReasonDisabled}></lightning-combobox>

          <!-- Conditionally rendered Case Sub Reason -->
          <template if:true={showCaseSubReason}>
            <lightning-combobox label="Case Sub Reason" options={finalDependentVal}
              disabled={caseSubReasonDisabled}></lightning-combobox>
          </template>
          <lightning-combobox label="Brand" options={brandOptions} value={selectedBrand}></lightning-combobox>

          <!-- Third Row -->
          <lightning-input type="text" label="Order Number"></lightning-input>
          <lightning-input type="text" label="Quote Number"></lightning-input>
          <lightning-input type="text" label="PO Number"></lightning-input>

        </div>

        <div class="form-grid3">
          <!-- Fourth Row -->
          <lightning-input type="text" label="Subject" required class="subject"></lightning-input>
          <lightning-textarea label="Description" required class="descp"></lightning-textarea>
        </div>
      </div>
      <footer class="modal-footer">
        <lightning-button label="Cancel" onclick={closeModal} variant="neutral"></lightning-button>
        <lightning-button label="Submit" variant="brand"></lightning-button>
      </footer>
    </div>
  </section>
  <div class="modal-backdrop"></div>
</template>